<!DOCTYPE html>
<html lang="en">
	<head>
		<title><strong>Study Friend Finder</strong></title>

		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="author" content="Julie Hoffman">

		<!-- Link to current min version of bootstrap and jquery library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">
   <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>

	</head>

		<body>
			<!-- Begin the bootstrap container -->
			<div class="container">

				<h2>Survey Questions:</h2>
				<hr>

				<!-- Begin user input -->
				<h3><strong>ABOUT YOU</strong></h3>
				<h4>Name (Required)</h4>
				<input type="text" name="" id="name" class="form-control" required >

				<h4>Link to Photo Image (Required)</h4>
				<input type="text" name="" id="photo" class="form-control" required >

				<hr>

				<!-- Begin 12 survey questions with dropdown selections of 1 (strongly disagree) to 5 (strongly agree) -->
				<h3><strong>Question 1</strong></h3>
				<h4>List your priorities, in order of importance:</h4>
			 	<select data-placeholder="" class="chosen-select" id="q1">
			 		<option value=""></option>
		            <option value="1">FAMILY, FRIENDS, WORK</option>
		            <option value="2">FRIENDS, FAMILY, WORK</option>
		            <option value="3">FAMILY, WORK, FRIENDS</option>
		            <option value="4">WORK, WHATEVER ELSE....</option>
		            <option value="5">ME, MYSELF, I</option>
		      	</select>

				<h3><strong>Question 2</strong></h3>
				<h4>What kind of a reader are you?<h4>
			 	<select data-placeholder="" class="chosen-select" id="q2">
			 		<option value=""></option>
		            <option value="1">VORACIOUS</option>
		            <option value="2">MID-LEVEL TO HEAVY READER OF ALL THINGS</option>
		            <option value="3">LIGHT TO MID-LEVEL READER OF ALL THINGS</option>
		            <option value="4">LIGHT READER OF ALL THINGS</option>
		            <option value="5">I'VE NEVER READ A BOOK</option>
		      	</select>


				<h3><strong>Question 3</strong></h3>
				<h4>How do you spend your free time?<h4>
			 	<select data-placeholder="" class="chosen-select" id="q3">
			 		<option value=""></option>
		            <option value="1">OUTSIDE ALWAYS</option>
		            <option value="2">INSIDE ALWAYS</option>
		            <option value="3">WITH PEOPLE</option>
		            <option value="4">BY MYSELF</option>
		            <option value="5">I HAVE NO FREE TIME</option>
		      	</select>


				<h3><strong>Question 4</strong></h3>
				<h4>Choose a vacation:<h4>
			 	<select data-placeholder="" class="chosen-select" id="q4">
			 		<option value=""></option>
		            <option value="1">BIKE THROUGH EUROPE</option>
		            <option value="2">A WEEK IN THE TROPICS</option>
		            <option value="3">A DAY HIKE SOUNDS AWESOME</option>
		            <option value="4">A WEEK OF FISHING IN THE SUN</option>
		            <option value="5">Iâ€™LL BE HERE IF YOU NEED ME</option>
		      	</select>


				<h3><strong>Question 5</strong></h3>
				<h4>Describe yourself in traffic:<h4>
			 	<select data-placeholder="" class="chosen-select" id="q5">
			 		<option value=""></option>
		            <option value="1">SEETHING</option>
		            <option value="2">TEETERING ON THE BRINK</option>
		            <option value="3">CUCUMBER, AS IN "COOL AS A..."</option>
		            <option value="4">CRYING</option>
		            <option value="5">SINGING LIKE AN IDIOT</option>
		      	</select>


				<h3><strong>Question 6</strong></h3>
				<h4>Do you want a hug?</h4>
			 	<select data-placeholder="" class="chosen-select" id="q6">
			 		<option value=""></option>
		            <option value="1">YES, SQUEEZE ME</option>
		            <option value="2">A HANDSHAKE WILL DO</option>
		            <option value="3">NOT RIGHT NOW, BUT MAYBE LATER ON MY OWN TERMS</option>
		            <option value="4">I'M REPORTING YOU TO HR</option>
		            <option value="5">DO YOU WANT A PUNCH?</option>
		      	</select>


				<h3><strong>Question 7</strong></h3>
				<h4>Where do you live?<h4>
			 	<select data-placeholder="" class="chosen-select" id="q7">
			 		<option value=""></option>
		            <option value="1">COUNTRY FARM</option>
		            <option value="2">SUBURBS</option>
		            <option value="3">CITY - BIG PLACE</option>
		            <option value="4">CITY - SMALL PLACE</option>
		            <option value="5">HOMELESS</option>
		      	</select>

				<h3><strong>Question 8</strong></h3>
				<h4>Choose a Film:</h4>
			 	<select data-placeholder="" class="chosen-select" id="q8">
			 		<option value=""></option>
		            <option value="1">TITANIC</option>
		            <option value="2">UP</option>
		            <option value="3">JAWS</option>
		            <option value="4">DIE HARD</option>
		            <option value="5">I HATE MOVIES</option>
		      	</select>

				<h3><strong>Question 9</strong></h3>
				<h4>What kind of person are you attracted to?</h4>
			 	<select data-placeholder="" class="chosen-select" id="q9">
			 		<option value=""></option>
		            <option value="1">ONLY LOOKS MATTER</option>
		            <option value="2">MAKE ME LAUGH, I'M YOURS</option>
		            <option value="3">SOMEONE INDEPENDENT</option>
		            <option value="4">SOMEONE WHO RELAXES ME</option>
		            <option value="5">I HATE EVERYONE</option>
		      	</select>

				<h3><strong>Question 10</strong></h3>
				<h4>How do you give back to the community?</h4>
			 	<select data-placeholder="" class="chosen-select" id="q10">
			 		<option value=""></option>
		            <option value="1">I VOLUNTEER</option>
		            <option value="2">I GIVE TO LOCAL CHARITIES</option>
		            <option value="3">I PAY MY TAXES, THAT'S ENOUGH</option>
		            <option value="4">JUST BEING ALIVE</option>
		            <option value="5">I DO NOTHING</option>
		      	</select>

					<h3><strong>Question 11</strong></h3>
					<h4>How important is fashion in your life?</h4>
				 	<select data-placeholder="" class="chosen-select" id="q10">
				 		<option value=""></option>
			            <option value="1">IT'S EVERYTHING</option>
			            <option value="2">I LOVE SHOPPING BUT THERE ARE MORE IMPORTANT THINGS</option>
			            <option value="3">I LOVE LOOKING GOOD BUT THERE ARE MORE IMPORTANT THINGS</option>
			            <option value="4">THE LESS CLOTHING THE BETTER</option>
			            <option value="5">I COULD CARE LESS</option>
			      	</select>

					<h3><strong>Question 12</strong></h3>
					<h4>How clean is your place?</h4>
				 	<select data-placeholder="" class="chosen-select" id="q10">
				 		<option value=""></option>
			            <option value="1">IMMACULATE</option>
			            <option value="2">ALMOST ALWAYS CLEAN</option>
			            <option value="3">CLOTHES LIVE ON MY FLOOR</option>
			            <option value="4">BUGS LIVE ON MY FLOOR</option>
			            <option value="5">HAVE YOU HEARD OF THE SHOW HOARDERS?</option>
			      	</select>

				<br>
				<br>

				<!-- Submit Button -->
				<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
					<i class="fa fa-check-circle" aria-hidden="true"></i>
		 		SUBMIT</button>

			<!-- End the bootstrap container -->
			</div>

			<!-- Modal -->
			<div id="resultsModal" class="modal fade" role="dialog">
			  <div class="modal-dialog">

			    <!-- Modal content-->
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal">&times;</button>
			        <h2 class="modal-title"><strong>Your Best Study Friend Match!</strong></h2>
			      </div>
			      <div class="modal-body">
			        <h2 id="matchName"></h2>
			        <img id="matchImg" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			      </div>
			    </div>

			  </div>
			</div>

			 <script type="text/javascript">
		  	// Chosen CSS method
		    var config = {
		      '.chosen-select'           : {},
		      '.chosen-select-deselect'  : {allow_single_deselect:true},
		      '.chosen-select-no-single' : {disable_search_threshold:10},
		      '.chosen-select-no-results': {no_results_text:'Oops, Nothing Found!'},
		      '.chosen-select-width'     : {width:"95%"}
		    }
		    // Loop over
		    for (var selector in config) {
		      $(selector).chosen(config[selector]);
		    }
		    // Collect the user inputs on the form when the submit button is clicked
		    $("#submit").on("click", function(){
		    	// Form validator function
		    	function validateForm() {
				  var isValid = true;
				  $('.form-control').each(function() {
				    if ( $(this).val() === '' )
				        isValid = false;
				  });
				  $('.chosen-select').each(function() {
				  	if( $(this).val() === "")
				  		isValid = false
				  })
				  return isValid;
				}
				// If all user input fields on the form are filled in
				if (validateForm() == true)
				{
					// Create an object  to hold the user's input or data
			    	var userData = {
			    		name: $("#name").val(),
			    		photo: $("#photo").val(),
			    		scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
			    	}
			    	// Grab the URL of the website
			    	var currentURL = window.location.origin;
			    	// AJAX POST to the data to the friends.js API.
			    	$.post(currentURL + "/api/friends", userData, function(data){
			    		// Grab the result from the AJAX post so that the best match's name and photo are displayed.
			    		$("#matchName").text(data.name);
			    		$('#matchImg').attr("src", data.photo);
				    	// Show the modal window with the best match
				    	$("#resultsModal").modal('toggle');
			    	});
				}
				else
				{
					alert("Please fill out all fields before submitting the survey!");
				}

		    	return false;
		    });
		  	</script>

</body>
</html>
